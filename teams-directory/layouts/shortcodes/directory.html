<div class="container mx-auto md:px-4 lg:px-8" x-data="directory">
    <div x-text="message"></div>
    <div class="animate-bounce text-center text-xl font-semibold pt-16" x-show="! initdone || initerror">
        {{ partial "logo.html" . }}
        <span>Loading...</span>
    </div>
    <div x-show="initdone && ! initerror" x-transition x-cloak>
        <div class="flex flex-row" x-show="initdone && ! initerror" x-transition x-cloak>
            <div class="md:flex-auto">
                {{ partial "logo.html" . }}
                <span class="hidden md:inline grow pl-4 text-2xl align-middle">{{ .Site.Title }}</span>
            </div>
            <div class="md:grow text-right">
                <input class="form-input rounded-full inline-block dark:text-black" type="search" x-model.debounce="search" placeholder="Search...">
            </div>
        </div>
        <table class="table-auto w-full">
            <tbody>
                <template x-for="(item, index) in filteredList" :key="item.id">
                    <tr class="odd:bg-white even:bg-slate-100 odd:dark:bg-black even:dark:bg-slate-900">
                        <td class="pl-2 md:p-0">
                            <div class="w-full">
                                <img class="inline" src="/img/presence_unknown.png" :src="getPresence(item.id)" :title="getPresenceDescription(item.id)">
                                <span x-text="item.displayName"></span>
                            </div>
                        </td>
                        <td class="hidden lg:table-cell" x-text="item.jobTitle"></td>
                        <td>
                            <a title="Email" :href="mailto(item)">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="inline" viewBox="0 0 16 16">
                                    <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
                                </svg>
                                <span class="hidden md:inline" x-text="value(item.mail)"></span>
                            </a>
                        </td>
                        <td>
                            <a title="Teams Chat" target="_blank" :href="chat(item)">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="inline" viewBox="0 0 16 16">
                                    <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                                </svg>
                            </a>
                        </td>
                        <td>
                            <a title="Teams Call" target="_blank" :href="callto(item)">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="inline" viewBox="0 0 16 16">
                                    <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/>
                                </svg>
                            </a>
                        </td>
                        <td class="hidden lg:table-cell">
                            <a title="Phone Call" :href="tel(item)" :class="hastel(item) ? '' : 'hidden'">
                                <span x-text="telText(item)"></span>
                            </a>
                        </td>
                    </tr>
                </template>
            </tbody>
        </table>
    </div>
</div>
