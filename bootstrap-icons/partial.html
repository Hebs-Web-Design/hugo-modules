{{- $scratch := newScratch }}
{{- with .class }}
{{-   $scratch.Set "class" . }}
{{- end }}
{{- with .width }}
{{-   $scratch.Set "width" . }}
{{- end }}
{{- with .height }}
{{-   $scratch.Set "height" . }}
{{- end }}
{{- with .title }}
{{-   $scratch.Set "title" . }}
{{- end }}
{{- with .icon }}
{{-   $icon := resources.Get (printf "bootstrap-icons/%s.svg" .) }}
{{-   with $icon }}
{{-     $scratch.Set "content" $icon.Content }}
{{-   else }}
{{-     $scratch.Set "content" (resources.Get "bootstrap-icons/exclamation-circle.svg").Content}}
{{-   end }}
{{-   $svg := $scratch.Get "content" }}
{{-   with ($scratch.Get "class") }}
{{-     $svg = replaceRE "class=\"[a-zA-Z\\-\\. 0-9]*\"" (printf "class=\"%s\"" .) $svg }}
{{-   end }}
{{-   with ($scratch.Get "width") }}
{{-     $svg = replaceRE "width=\"[0-9]*\"" (printf "width=\"%s\"" .) $svg }}
{{-   end }}
{{-   with ($scratch.Get "height") }}
{{-     $svg = replaceRE "height=\"[0-9]*\" " (printf "height=\"%s\"" .) $svg }}
{{-   end }}
{{-   with ($scratch.Get "title") }}
{{-     $svg = replaceRE "(.*)</svg>" (printf "$1\n<title>%s</title>\n</svg>" .) $svg }}
{{-   end }}
{{-   $svg | safeHTML }}
{{- end }}
